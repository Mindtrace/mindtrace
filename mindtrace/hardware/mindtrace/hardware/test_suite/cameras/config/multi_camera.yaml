# Multi-Camera Test Configuration
# Concurrent camera operations and bandwidth management

name: multi_camera
description: Test concurrent operations on multiple cameras with bandwidth management

# API Configuration
api:
  base_url: http://localhost:8003
  timeout: 30.0

# Hardware Configuration
hardware:
  backend: Basler
  camera_count: 4

# Test Parameters
test:
  batch_capture_count: 50
  exposure_us: 2000
  delay_between_batches: 0.1  # 100ms
  max_concurrent_captures: 2  # Bandwidth limit

# Expectations
expectations:
  total_timeout: 900.0  # 15 minutes - conservative for 50 batch captures
  timeout_per_operation: 15.0
  expected_success_rate: 0.90  # 90% success expected

# Tags
tags:
  - multi-camera
  - batch
  - bandwidth
  - concurrent

# Test Operations
operations:
  - action: discover
    payload:
      backend: Basler
    timeout: 10.0
    store_result: cameras

  - action: open_batch
    payload:
      cameras: "$cameras[0:4]"
      test_connection: true
    timeout: 30.0

  - action: configure_batch
    payload:
      configurations:
        "$cameras[0]": {exposure: 2000}
        "$cameras[1]": {exposure: 2000}
        "$cameras[2]": {exposure: 2000}
        "$cameras[3]": {exposure: 2000}
    timeout: 10.0

  - action: capture_batch
    payload:
      cameras: "$cameras[0:4]"
    timeout: 15.0
    repeat: 50
    delay: 0.1

# Cleanup Operations (always run)
cleanup_operations:
  - action: close_batch
    payload:
      cameras: "$cameras[0:4]"
    timeout: 10.0

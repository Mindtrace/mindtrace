# Soak Test Configuration
# Long-duration stability testing

name: soak_test
description: Long-duration test for stability and resource leak detection

# API Configuration
api:
  base_url: http://localhost:8003
  timeout: 30.0

# Hardware Configuration
hardware:
  backend: Basler
  camera_count: 1

# Test Parameters
test:
  capture_count: 5000
  exposure_us: 2000
  delay_between_captures: 0.05  # 50ms
  max_concurrent_captures: 1

# Expectations
expectations:
  total_timeout: 30000.0  # ~8.3 hours
  timeout_per_operation: 5.0
  expected_success_rate: 0.85  # 85% success expected

# Tags
tags:
  - soak
  - long-duration
  - stability
  - resource-leak

# Test Operations
operations:
  - action: discover
    payload:
      backend: Basler
    timeout: 10.0
    store_result: cameras

  - action: open
    payload:
      camera: "$cameras[0]"
      test_connection: true
    timeout: 15.0

  - action: configure
    payload:
      camera: "$cameras[0]"
      properties:
        exposure: 2000
    timeout: 5.0

  - action: capture
    payload:
      camera: "$cameras[0]"
    timeout: 5.0
    repeat: 5000
    delay: 0.05

# Cleanup Operations (always run)
cleanup_operations:
  - action: close
    payload:
      camera: "$cameras[0]"
    timeout: 5.0

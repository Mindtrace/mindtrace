# Capture Stress Test Configuration
# High-frequency capture stress testing

name: capture_stress
description: Stress test with rapid continuous captures from single camera

# API Configuration
api:
  base_url: http://localhost:8003
  timeout: 30.0

# Hardware Configuration
hardware:
  backend: Basler
  camera_count: 1

# Test Parameters
test:
  capture_count: 100
  delay_between_captures: 0.01  # 10ms
  # Note: Camera config parameters moved to configure operation

# Expectations
expectations:
  total_timeout: 600.0  # 10 minutes - conservative for 100 captures
  timeout_per_operation: 5.0
  expected_success_rate: 0.95  # 95% success expected

# Tags
tags:
  - stress
  - capture
  - performance

# Test Operations
operations:
  - action: discover
    payload:
      backend: Basler
    timeout: 10.0
    store_result: cameras

  - action: open
    payload:
      camera: "$cameras[0]"
      test_connection: true
    timeout: 15.0

  - action: configure
    payload:
      camera: "$cameras[0]"
      properties:
        exposure_time: 2000.0  # Aligned with CameraSettings.exposure_time
    timeout: 5.0

  - action: capture
    payload:
      camera: "$cameras[0]"
    timeout: 5.0
    repeat: 100
    delay: 0.01

# Cleanup Operations (always run)
cleanup_operations:
  - action: close
    payload:
      camera: "$cameras[0]"
    timeout: 5.0
